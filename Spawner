using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class SpawnTest : MonoBehaviour {

    public int enemyCount;
    public static int enemyCountstatic;//enemies (count)
    public GameObject prefab;

   // Random avatar sizes
    private PlayerBehaviour _playerBehaviour;
    int _playerSize;
    private EnnemyBehaviour _EnemyBehaviour;
    int _enemySize;

    float _enemySpeed;

    public float chronostart;//timer to spawn
    public float chrono;
    public int maxEnemybase;//enemies in scene
    public int maxEnemyallowed;

	// Use this for initialization
	void Start ()
    {
        enemyCountstatic = enemyCount;
        _playerBehaviour = GameObject.Find("Player").GetComponent<PlayerBehaviour>();
        _EnemyBehaviour = prefab.GetComponent<EnnemyBehaviour>();

	}


    // Update is called once per frame
    void Update ()
    {
        maxEnemyallowed = maxEnemybase + _playerSize;//nb d'ennemis autoris√©s

        _enemySize = _EnemyBehaviour.ennemySize;
        _playerSize = _playerBehaviour.playerSize;

        if (enemyCount < maxEnemyallowed)
            {

            chrono -= Time.deltaTime;

            if (chrono <= 0)
            {
                Instantiate(prefab);
                prefab.GetComponent<EnnemyBehaviour>().ennemySize = _playerSize;
                //_enemySize = _playerSize + Random.Range(-2, +2);

                chrono = chronostart;
                enemyCount += 1;
            }
        }
    }
}
